
<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8"> 
        <title>Weather Station</title>
        <script src="plotly-latest.min.js"></script>
    </head>
    <body>
        <h2>Temperature</h2>
        <div id="tempplotdiv" style="width:80vw;height:80vh;"></div>
        <h2>Pressure</h2>
        <div id="pressureplotdiv" style="width:80vw;height:80vh;"></div>
        <h2>Humidity</h2>
        <div id="humidityplotdiv" style="width:80vw;height:80vh;"></div>
        <h2>Air Conductivity</h2>
        <div id="aircondplotdiv" style="width:80vw;height:80vh;"></div>
        <h2>Light</h2>
        <div id="lightplotdiv" style="width:80vw;height:80vh;"></div>
        <script>

            fetch('query.php')
                .then(function(response) {
                    return response.json();
                })
                .then(function(json) {

                    var temp_data = [
                        {
                            x: json['t'],
                            y: json['air_temp'],
                            mode: "lines",
                            name: "Air Temperature",
                            type: 'scatter',
                            line: {color: '#F47942'}
                        },

                        {
                            x: json['t'],
                            y: json['ground_temp'],
                            mode: "lines",
                            name: "Ground Temperature",
                            type: 'scatter',
                            line: {color: '#FFD039'}
                        }
                    ];

                    var pressure_data = [
                        {
                            x: json['t'],
                            y: json['pressure'],
                            mode: "lines",
                            name: "Pressure",
                            type: 'scatter',
                            line: {color: '#FFD039'}
                        }
                    ];

                    var humidity_data = [
                        {
                            x: json['t'],
                            y: json['humidity'],
                            mode: "lines",
                            name: "Humidity",
                            type: 'scatter',
                            line: {color: '#FFD039'}
                        }
                    ];

                    var aircon_data = [
                        {
                            x: json['t'],
                            y: json['air_conductivity'],
                            mode: "lines",
                            name: "Air Conductivity",
                            type: 'scatter',
                            line: {color: '#FFD039'}
                        }
                    ];

                    var light_data = [
                        {
                            x: json['t'],
                            y: json['light'],
                            mode: "lines",
                            name: "Light",
                            type: 'scatter',
                            line: {color: '#FFD039'}
                        }
                    ];

                    Plotly.plot('tempplotdiv', temp_data);
                    Plotly.plot('pressureplotdiv', pressure_data);
                    Plotly.plot('humidityplotdiv', humidity_data);
                    Plotly.plot('aircondplotdiv', aircon_data);
                    Plotly.plot('lightplotdiv', light_data);
                });    
        </script>
    </body>
</html>


